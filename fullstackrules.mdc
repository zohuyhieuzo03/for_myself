---
alwaysApply: true
---

# Cursor Rules - Full Stack FastAPI Template

## ğŸ—ï¸ Kiáº¿n trÃºc
- **Backend**: FastAPI + SQLModel + PostgreSQL + Alembic
- **Frontend**: React + TypeScript + TanStack Router + Chakra UI
- **Development**: Docker Compose

## ğŸš€ Development Workflow

### 1. Backend First
```python
# 1. Models (backend/app/models.py)
class EntityBase(SQLModel):          # Base fields
class EntityCreate(EntityBase):      # Creation
class EntityUpdate(BaseModel):       # Update (optional)
class Entity(EntityBase, table=True): # Database
class EntityPublic(EntityBase):      # API response
```

### 2. CRUD & API
- Táº¡o `crud/entity.py` vá»›i create/read/update/delete
- Import vÃ o `crud/__init__.py` vÃ  thÃªm `__all__`
- Táº¡o `api/routes/entity.py` vá»›i GET/POST/PUT/DELETE

### 3. Database Migration
```bash
# Táº¡o migration
docker exec full-stack-fastapi-template-backend-1 alembic revision --autogenerate -m "description"

# Cháº¡y migration
docker exec full-stack-fastapi-template-backend-1 alembic upgrade head

# Xem lá»‹ch sá»­
docker exec full-stack-fastapi-template-backend-1 alembic history

# Rollback
docker exec full-stack-fastapi-template-backend-1 alembic downgrade -1
```

### 4. API Client & Frontend
```bash
# Generate client
./scripts/generate-client.sh

# Frontend components
frontend/src/components/EntityName/
â”œâ”€â”€ EntityNameList.tsx
â”œâ”€â”€ EntityNameForm.tsx
â”œâ”€â”€ EntityNameItem.tsx
â””â”€â”€ EntityNameDetail.tsx
```

## ğŸ³ Docker Commands

### Container Management
```bash
docker compose watch          # Start all
docker compose down           # Stop all
docker compose logs backend   # View logs
```

### Backend Operations
```bash
cd backend && source .venv/bin/activate && pytest
cd backend && source .venv/bin/activate && ./scripts/generate-client.sh
```

### Frontend Operations
```bash
cd frontend && npm install
cd frontend && npm run dev
cd frontend && npm test
cd frontend && npm run build
```

## ğŸ“ File Structure
```
backend/app/
â”œâ”€â”€ models.py              # SQLModel definitions
â”œâ”€â”€ crud/                  # Database operations
â”œâ”€â”€ api/routes/           # API endpoints
â””â”€â”€ alembic/versions/     # Migrations

frontend/src/
â”œâ”€â”€ components/           # React components
â”œâ”€â”€ routes/              # TanStack Router
â”œâ”€â”€ client/              # Auto-generated API client
â””â”€â”€ hooks/               # Custom hooks
```

## ğŸ¯ Naming Conventions
- **Backend**: PascalCase models, snake_case functions
- **Frontend**: PascalCase components, camelCase hooks
- **API**: snake_case routes, camelCase client calls

## ğŸ”§ Code Quality
- **Backend**: Type hints, Pydantic validation, SQLModel
- **Frontend**: TypeScript strict, ESLint, component composition
- **Testing**: pytest (backend), npm test (frontend)

## ğŸš¨ Error Handling
- âŒ **KHÃ”NG** fix cháº¯p vÃ¡, workaround, magic numbers
- âœ… **LUÃ”N** tÃ¬m nguyÃªn nhÃ¢n gá»‘c rá»…
- âœ… **Äá»ŒC** error message cáº©n tháº­n
- âœ… **KIá»‚M TRA** documentation vÃ  best practices

## ğŸ“‹ Migration Best Practices
- âœ… Táº¡o migration khi thay Ä‘á»•i models
- âœ… Cháº¡y migration sau khi táº¡o
- âœ… Commit migration files
- âŒ KhÃ´ng sá»­a/xÃ³a migration Ä‘Ã£ commit

---

**LÆ°u Ã½**: Sá»­ dá»¥ng Docker commands cho táº¥t cáº£ database operations trong development.